# üî• –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Firebase –¥–ª—è Railway

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ù–∞ Railway –Ω–µ–º–∞—î —Ñ–∞–π–ª—É `firebase-credentials.json`, —Ç–æ–º—É Firebase –Ω–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è —ñ –¥–∞–Ω—ñ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è.

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ **–∑–º—ñ–Ω–Ω—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞** `FIREBASE_CREDENTIALS` –≤ Railway.

---

## üìã –ü–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

### –ö—Ä–æ–∫ 1: –û—Ç—Ä–∏–º–∞–π—Ç–µ Service Account Key

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ [Firebase Console](https://console.firebase.google.com/)
2. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. ‚öôÔ∏è **Settings** ‚Üí **Project settings**
4. –í–∫–ª–∞–¥–∫–∞ **Service accounts**
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Generate new private key**
6. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ JSON —Ñ–∞–π–ª

### –ö—Ä–æ–∫ 2: –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—É –≤ Railway

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ **Railway dashboard**
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Variables**
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **+ New Variable**
4. **Name:** `FIREBASE_CREDENTIALS`
5. **Value:** –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π JSON —Ñ–∞–π–ª, —Å–∫–æ–ø—ñ—é–π—Ç–µ **–≤–µ—Å—å –≤–º—ñ—Å—Ç** —ñ –≤—Å—Ç–∞–≤—Ç–µ –≤ Value
6. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Add**

**–í–∞–∂–ª–∏–≤–æ:** –í—Å—Ç–∞–≤—Ç–µ –≤–µ—Å—å JSON, –≤–∫–ª—é—á–∞—é—á–∏ —Ñ—ñ–≥—É—Ä–Ω—ñ –¥—É–∂–∫–∏ `{...}`

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –¥–µ–ø–ª–æ–π

1. **Deployments** ‚Üí **Redeploy**
2. –ê–±–æ –∑—Ä–æ–±—ñ—Ç—å –Ω–æ–≤–∏–π commit —ñ push

### –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏

–í Railway dashboard ‚Üí **Deployments** ‚Üí **View Logs** –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è:

```
‚úÖ Firebase –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ (–∑ –∑–º—ñ–Ω–Ω–æ—ó —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞)
```

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Railway

–ü—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –º–∞—î –±—É—Ç–∏:
```
‚úÖ Firebase –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ (–∑ –∑–º—ñ–Ω–Ω–æ—ó —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞)
```

–Ø–∫—â–æ –±–∞—á–∏—Ç–µ:
```
‚ö†Ô∏è  Firebase –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
```
‚Üí –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–¥–∞–ª–∏ –∑–º—ñ–Ω–Ω—É `FIREBASE_CREDENTIALS`

### 2. –ó–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞–Ω –ø—Ä–∏—Å—Ç—Ä–æ—é –∑ Android –¥–æ–¥–∞—Ç–∫—É

1. –ó–∞–π–¥—ñ—Ç—å –Ω–∞ –µ–∫—Ä–∞–Ω "–ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏"
2. –ó–º—ñ–Ω—ñ—Ç—å —Å—Ç–∞–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É–≤—ñ–º–∫–Ω—ñ—Ç—å –ø–∞–Ω–µ–ª—ñ)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Railway - –º–∞—î –±—É—Ç–∏:
   ```
   ‚òÅÔ∏è  –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é –ø—Ä–∏—Å—Ç—Ä—ñ–π –∑ Firebase: direction_panels_1
   ‚úÖ –£—Å–ø—ñ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑ Firebase: direction_panels_1
   ```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Firebase Console

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Firebase Console
2. **Firestore Database** ‚Üí `device_states`
3. –ú–∞—é—Ç—å –∑'—è–≤–∏—Ç–∏—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∏:
   - `direction_panels_1`
   - `ventilation_1`
   - `heating_1`

---

## üìù –ü—Ä–∏–∫–ª–∞–¥ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó

`FIREBASE_CREDENTIALS` –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ —â–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç:

```json
{
  "type": "service_account",
  "project_id": "your-project-id",
  "private_key_id": "...",
  "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",
  "client_email": "...",
  "client_id": "...",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  ...
}
```

**–í–∞–∂–ª–∏–≤–æ:** –í–µ—Å—å JSON –≤ –æ–¥–Ω–æ–º—É —Ä—è–¥–∫—É –∞–±–æ –∑ –ø–µ—Ä–µ–Ω–æ—Å–∞–º–∏ - –æ–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –ø—Ä–∞—Ü—é—é—Ç—å.

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Firebase –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ" –≤ –ª–æ–≥–∞—Ö

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –¥–æ–¥–∞–ª–∏ –∑–º—ñ–Ω–Ω—É `FIREBASE_CREDENTIALS` –≤ Railway
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–Ω–∞—á–µ–Ω–Ω—è - —Ü–µ –≤–∞–ª—ñ–¥–Ω–∏–π JSON
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ JSON –º—ñ—Å—Ç–∏—Ç—å `"type": "service_account"`

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid service account certificate"

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Service Account key (–Ω–µ `google-services.json`!)
- –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –∫–ª—é—á –∑–∞–Ω–æ–≤–æ –∑ Firebase Console

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω—ñ –Ω–µ –∑'—è–≤–ª—è—é—Ç—å—Å—è –≤ Firebase

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Railway - —á–∏ —î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é?
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–º—ñ–Ω—é—î—Ç–µ —Å—Ç–∞–Ω –ø—Ä–∏—Å—Ç—Ä–æ—é (—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ PUT –∑–∞–ø–∏—Ç—ñ)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –≤ Firebase Console

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Firebase –Ω–∞ Railway:
- ‚úÖ –î–∞–Ω—ñ –±—É–¥—É—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏—Å—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—é
- ‚úÖ –°—Ç–∞–Ω–∏ –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –±—É–¥—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è –≤ Firebase
- ‚úÖ –í—Å—ñ Android –ø—Ä–∏—Å—Ç—Ä–æ—ó –∑–º–æ–∂—É—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏—Å—è –∑ Firebase

---

## üí° –ü–æ—Ä–∞–¥–∏

- ‚úÖ –ù–µ –∫–æ–º—ñ—Ç—å—Ç–µ `firebase-credentials.json` –≤ Git (–≤—ñ–Ω –≤–∂–µ –≤ `.gitignore`)
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –¥–ª—è –¥–µ–ø–ª–æ—é (–±–µ–∑–ø–µ—á–Ω—ñ—à–µ)
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏ Railway –ø—ñ—Å–ª—è –∑–º—ñ–Ω

